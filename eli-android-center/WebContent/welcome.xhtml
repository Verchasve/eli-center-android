<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">
	<h:head>
		<title>Demo</title>
		<style>
			body, html {
				font-size: 12px;
			}
		</style>
	</h:head>
	<h:body>
		<f:event type="postAddToView" listener="#{getData.onload}" />
		<h:form id="form1">
			<table style="border: 1px solid #ddd; width: 800px" cellspacing="2px">
				<tr style="background: #ccc">
					<th>ID</th>
					<th style="height: 30px">Application Name</th>
					<th>Package</th>
					<th>Size (KB)</th>
					<th>Version Name</th>
					<th>Version Code</th>
					<th>Last Update</th>
				</tr>
				<ui:repeat var="item" value="#{getData.listItem}">
					<tr>
						<td><h:outputText value="#{item.id}"/></td>
						<td>
							<h:commandLink value="#{item.name}" actionListener="#{getData.select}">
								<f:attribute name="item" value="#{item}"></f:attribute>
							</h:commandLink>
						</td>
						<td><h:outputText value="#{item.packageName}"/></td>
						<td><h:outputText value="#{item.size}"/></td>
						<td><h:outputText value="#{item.version}"/></td>
						<td><h:outputText value="#{item.version_code}"/></td>
						<td><h:outputText value="#{item.lastUpdate}"/></td>
					</tr>
				</ui:repeat>
			</table>
			<h:commandLink value="Create New App" action="#{getData.create}"></h:commandLink>
		</h:form>
		<h:form enctype="multipart/form-data">
			<h:panelGrid columns="2" id="formUpdate" rendered="#{getData.action == 'update' or getData.action=='create'}">
				<h:outputText value="Application name"/>
				<h:inputText value="#{getData.item.name}"/>
				
				<h:outputText value="Package name"/>
				<h:inputText value="#{getData.item.packageName}"/>
				
				<h:outputText value="Size"/>
				<h:inputText value="#{getData.item.size}"/>
				
				<h:outputText value="Version name"/>
				<h:inputText value="#{getData.item.version}"/>
				
				<h:outputText value="Version code"/>
				<h:inputText value="#{getData.item.version_code}"/>
				
				<h:outputText value="Description"/>
				<h:inputText value="#{getData.item.description}"/>
				
				<h:outputText value="" rendered="#{getData.action == 'update'}"/>
				<h:commandButton value="Update" action="#{getData.update}" rendered="#{getData.action == 'update'}"/>
				
				<h:outputText value=""/>
		        <p:fileUpload value="#{getData.fileUpload}" mode="simple"/> 
		        
		        <h:outputText value=""/>
				<h:commandButton value="Upload" action="#{getData.uploadFile}"/>
			</h:panelGrid>
		</h:form>
	</h:body>
</html>